--stmt
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- [-- DB CONTEXT --] --
USE [Principia_Interface]

-- [-- DB USERS --] --
IF NOT EXISTS (SELECT [name] FROM sys.database_principals WHERE [name] =  'dbo') BEGIN CREATE USER  [dbo] FOR LOGIN [sa] WITH DEFAULT_SCHEMA = [dbo] END; 
IF NOT EXISTS (SELECT [name] FROM sys.database_principals WHERE [name] =  'dsvc_HUBFHLBROLink') BEGIN CREATE USER  [dsvc_HUBFHLBROLink] FOR LOGIN [dsvc_HUBFHLBROLink] WITH DEFAULT_SCHEMA = [dbo] END; 
IF NOT EXISTS (SELECT [name] FROM sys.database_principals WHERE [name] =  'FHLBDM\G-FHLB-Developers') BEGIN CREATE USER  [FHLBDM\G-FHLB-Developers] FOR LOGIN [FHLBDM\G-FHLB-Developers] WITH DEFAULT_SCHEMA = [dbo] END; 
IF NOT EXISTS (SELECT [name] FROM sys.database_principals WHERE [name] =  'FHLBDM\svc_HubDWHLinkRO') BEGIN CREATE USER  [FHLBDM\svc_HubDWHLinkRO] FOR LOGIN [FHLBDM\svc_HubDWHLinkRO] WITH DEFAULT_SCHEMA = [FHLBDM\svc_HubDWHLinkRO] END; 
-- [-- ORPHANED USERS --] --
-- [-- DB ROLES --] --
EXEC sp_addrolemember @rolename = 'db_datareader', @membername = 'FHLBDM\G-FHLB-Developers'
EXEC sp_addrolemember @rolename = 'db_datareader', @membername = 'FHLBDM\IT-Divisional Accounting Team'
EXEC sp_addrolemember @rolename = 'db_owner', @membername = 'FHLBDM\G-FHLB-Developers'

-- [-- OBJECT LEVEL PERMISSIONS --] --
GRANT DELETE ON [dbo].[dtproperties] TO [public]
GRANT EXECUTE ON [dbo].[dt_addtosourcecontrol] TO [public]
GRANT EXECUTE ON [dbo].[dt_addtosourcecontrol_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_adduserobject] TO [public]
GRANT EXECUTE ON [dbo].[dt_adduserobject_vcs] TO [public]
GRANT EXECUTE ON [dbo].[dt_checkinobject] TO [public]
GRANT EXECUTE ON [dbo].[dt_checkinobject_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_checkoutobject] TO [public]
GRANT EXECUTE ON [dbo].[dt_checkoutobject_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_displayoaerror] TO [public]
GRANT EXECUTE ON [dbo].[dt_displayoaerror_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_droppropertiesbyid] TO [public]
GRANT EXECUTE ON [dbo].[dt_dropuserobjectbyid] TO [public]
GRANT EXECUTE ON [dbo].[dt_generateansiname] TO [public]
GRANT EXECUTE ON [dbo].[dt_getobjwithprop] TO [public]
GRANT EXECUTE ON [dbo].[dt_getobjwithprop_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_getpropertiesbyid] TO [public]
GRANT EXECUTE ON [dbo].[dt_getpropertiesbyid_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_getpropertiesbyid_vcs] TO [public]
GRANT EXECUTE ON [dbo].[dt_getpropertiesbyid_vcs_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_isundersourcecontrol] TO [public]
GRANT EXECUTE ON [dbo].[dt_isundersourcecontrol_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_removefromsourcecontrol] TO [public]
GRANT EXECUTE ON [dbo].[dt_setpropertybyid] TO [public]
GRANT EXECUTE ON [dbo].[dt_setpropertybyid_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_validateloginparams] TO [public]
GRANT EXECUTE ON [dbo].[dt_validateloginparams_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_vcsenabled] TO [public]
GRANT EXECUTE ON [dbo].[dt_verstamp006] TO [public]
GRANT EXECUTE ON [dbo].[dt_verstamp007] TO [public]
GRANT EXECUTE ON [dbo].[dt_whocheckedout] TO [public]
GRANT EXECUTE ON [dbo].[dt_whocheckedout_u] TO [public]
GRANT INSERT ON [dbo].[dtproperties] TO [public]
GRANT REFERENCES ON [dbo].[dtproperties] TO [public]
GRANT SELECT ON [dbo].[dtproperties] TO [public]
GRANT SELECT ON [dbo].[HET_Results] TO [dsvc_HUBFHLBROLink]
GRANT SELECT ON [dbo].[HET_Results] TO [FHLBDM\svc_HubDWHLinkRO]
GRANT UPDATE ON [dbo].[dtproperties] TO [public]
-- [-- TYPE LEVEL PERMISSIONS --] --

-- [--DB LEVEL PERMISSIONS --] --
GRANT CONNECT TO [dsvc_HUBFHLBROLink]
GRANT CONNECT TO [FHLBDM\G-FHLB-Developers]
GRANT CONNECT TO [FHLBDM\IT-Divisional Accounting Team]
GRANT VIEW DEFINITION TO [FHLBDM\G-FHLB-Developers]

-- [--DB LEVEL SCHEMA PERMISSIONS --] --

