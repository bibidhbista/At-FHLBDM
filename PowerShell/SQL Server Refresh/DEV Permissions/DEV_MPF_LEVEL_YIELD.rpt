--stmt
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- [-- DB CONTEXT --] --
USE [MPF_Level_Yield]

-- [-- DB USERS --] --
IF NOT EXISTS (SELECT [name] FROM sys.database_principals WHERE [name] =  'dbo') BEGIN CREATE USER  [dbo] FOR LOGIN [sa] WITH DEFAULT_SCHEMA = [dbo] END; 
IF NOT EXISTS (SELECT [name] FROM sys.database_principals WHERE [name] =  'FHLBDM\G-FHLB-Developers') BEGIN CREATE USER  [FHLBDM\G-FHLB-Developers] FOR LOGIN [FHLBDM\G-FHLB-Developers] WITH DEFAULT_SCHEMA = [dbo] END; 
IF NOT EXISTS (SELECT [name] FROM sys.database_principals WHERE [name] =  'FHLBDM\G-SQL Public') BEGIN CREATE USER  [FHLBDM\G-SQL Public] FOR LOGIN [FHLBDM\G-SQL Public] WITH DEFAULT_SCHEMA = [dbo] END; 
IF NOT EXISTS (SELECT [name] FROM sys.database_principals WHERE [name] =  'FHLBDM\G-SQL-HUB Developers') BEGIN CREATE USER  [FHLBDM\G-SQL-HUB Developers] FOR LOGIN [FHLBDM\G-SQL-HUB Developers] WITH DEFAULT_SCHEMA = [dbo] END; 
IF NOT EXISTS (SELECT [name] FROM sys.database_principals WHERE [name] =  'FHLBDM\JAnderso') BEGIN CREATE USER  [FHLBDM\JAnderso] FOR LOGIN [FHLBDM\JAnderso] WITH DEFAULT_SCHEMA = [FHLBDM\JAnderso] END; 
-- [-- ORPHANED USERS --] --
-- [-- DB ROLES --] --
EXEC sp_addrolemember @rolename = 'db_owner', @membername = 'FHLBDM\G-FHLB-Developers'
EXEC sp_addrolemember @rolename = 'db_owner', @membername = 'FHLBDM\G-SQL-HUB Developers'

-- [-- OBJECT LEVEL PERMISSIONS --] --
GRANT DELETE ON [dbo].[dtproperties] TO [public]
GRANT EXECUTE ON [dbo].[dt_addtosourcecontrol] TO [public]
GRANT EXECUTE ON [dbo].[dt_addtosourcecontrol_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_adduserobject] TO [public]
GRANT EXECUTE ON [dbo].[dt_adduserobject_vcs] TO [public]
GRANT EXECUTE ON [dbo].[dt_checkinobject] TO [public]
GRANT EXECUTE ON [dbo].[dt_checkinobject_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_checkoutobject] TO [public]
GRANT EXECUTE ON [dbo].[dt_checkoutobject_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_displayoaerror] TO [public]
GRANT EXECUTE ON [dbo].[dt_displayoaerror_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_droppropertiesbyid] TO [public]
GRANT EXECUTE ON [dbo].[dt_dropuserobjectbyid] TO [public]
GRANT EXECUTE ON [dbo].[dt_generateansiname] TO [public]
GRANT EXECUTE ON [dbo].[dt_getobjwithprop] TO [public]
GRANT EXECUTE ON [dbo].[dt_getobjwithprop_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_getpropertiesbyid] TO [public]
GRANT EXECUTE ON [dbo].[dt_getpropertiesbyid_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_getpropertiesbyid_vcs] TO [public]
GRANT EXECUTE ON [dbo].[dt_getpropertiesbyid_vcs_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_isundersourcecontrol] TO [public]
GRANT EXECUTE ON [dbo].[dt_isundersourcecontrol_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_removefromsourcecontrol] TO [public]
GRANT EXECUTE ON [dbo].[dt_setpropertybyid] TO [public]
GRANT EXECUTE ON [dbo].[dt_setpropertybyid_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_validateloginparams] TO [public]
GRANT EXECUTE ON [dbo].[dt_validateloginparams_u] TO [public]
GRANT EXECUTE ON [dbo].[dt_vcsenabled] TO [public]
GRANT EXECUTE ON [dbo].[dt_verstamp006] TO [public]
GRANT EXECUTE ON [dbo].[dt_verstamp007] TO [public]
GRANT EXECUTE ON [dbo].[dt_whocheckedout] TO [public]
GRANT EXECUTE ON [dbo].[dt_whocheckedout_u] TO [public]
GRANT INSERT ON [dbo].[dtproperties] TO [public]
GRANT REFERENCES ON [dbo].[dtproperties] TO [public]
GRANT SELECT ON [dbo].[dtproperties] TO [public]
GRANT SELECT ON [dbo].[Economic_SMS_BA] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[Economic_SMS_BA_Fact_EOM] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[tblAmortScheduleCY] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[tblAmortScheduleLY] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[tblLoanExceptions] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[tblLoans] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[tblPayments] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[tblProcessingErrors] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[tblResultsCombined] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[tblResultsCY] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[tblResultsFinal] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[tblResultsLY] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[ufn_Ex_CYPrevMonth] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[ufn_Ex_IRRTooLarge] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[ufn_Ex_IRRWrongDirection] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[ufn_Ex_NegLoanBalance] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[v_PwC_MPF_Loan_DM_Fact_EOM] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[v_PwC_MPF_Loan_DM_Fact_EOM] TO [public]
GRANT SELECT ON [dbo].[v_PwC_tblResultsCombined] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[v_PwC_tblResultsCombined] TO [public]
GRANT SELECT ON [dbo].[v_PwC_tblResultsFinal] TO [FHLBDM\G-SQL Public]
GRANT SELECT ON [dbo].[v_PwC_tblResultsFinal] TO [public]
GRANT UPDATE ON [dbo].[dtproperties] TO [public]
GRANT VIEW DEFINITION ON [dbo].[Economic_SMS_BA] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[Economic_SMS_BA_Fact_EOM] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[LevelYieldPatch1] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[MPF_Loan_Sale_Rejects] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[ProcessingErrors] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[Summarized_TABLE_PRIVILEGES] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[TABLE_PRIVILEGES] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[tblAmortScheduleCY] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[tblAmortScheduleLY] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[tblLoanExceptions] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[tblLoans] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[tblPayments] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[tblProcessingErrors] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[tblResultsCombined] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[tblResultsCY] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[tblResultsFinal] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[tblResultsLY] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[test_ly] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[ufn_Ex_AllLoanExceptions] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[ufn_Ex_AmortGreaterThanAgentFee] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[ufn_Ex_AmortSignDifferent] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[ufn_Ex_CYPrevMonth] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[ufn_Ex_IRRTooLarge] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[ufn_Ex_IRRWrongDirection] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[ufn_Ex_NegLoanBalance] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[ufn_PreviousUnamortAmt] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[ufn_YearMonth] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[usp_ClearResultsTables] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[usp_ClearWorkingTables] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[usp_LevelYieldPatch] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[usp_LoadCurrentLoanSet] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[usp_LoadLoanExceptions] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[usp_LoadNewLoans] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[usp_LoadNewLoans_origversion] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[usp_LoadPaymentHistory] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[usp_LoadResultsCombined] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[usp_LoadResultsCY] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[usp_LoadResultsFinal] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[usp_LoadResultsLY] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[uv_Ex_AmortGreaterThanAgentFee] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[uv_Ex_AmortSignDifferent] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[uv_Ex_IRRTooLarge] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[uv_Ex_IRRWrongDirection] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[uv_Ex_NegLoanBalance] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[uv_Payments] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[uv_Payments_FAS133] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[uv_Payments_FAS133_OLD] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[uv_Payments_OLD] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[uv_Payments_SwapFee] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[uv_Payments_SwapFee_OLD] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[v_PwC_MPF_Loan_DM_Fact_EOM] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[v_PwC_tblResultsCombined] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[v_PwC_tblResultsFinal] TO [View_Definitions]
GRANT VIEW DEFINITION ON [dbo].[v_tblResultsFinal] TO [View_Definitions]
-- [-- TYPE LEVEL PERMISSIONS --] --

-- [--DB LEVEL PERMISSIONS --] --
GRANT CONNECT TO [FHLBDM\bxu]
GRANT CONNECT TO [FHLBDM\G-FHLB-Developers]
GRANT CONNECT TO [FHLBDM\G-SQL Public]
GRANT CONNECT TO [FHLBDM\G-SQL-HUB Developers]
GRANT SHOWPLAN TO [FHLBDM\G-FHLB-Developers]

-- [--DB LEVEL SCHEMA PERMISSIONS --] --

